<!DOCTYPE html>
<html data-require="math word-problems chemistry">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Finding Molecular Mass</title>
    <script src="../khan-exercise.js"></script>
    <script type="text/javascript">
        function combineMolecule(molecule){
            var whole = "";
            var n = 1;
            for(i=0;i<molecule.length;i++){
                if(i!=0 && molecule[i] === molecule [i-1]){
                    n++;
                    if(i === molecule.length - 1){
                        whole += "_";
                        whole += n.toString();
                    }
                }
                else if(n > 1){
                    whole += "_";
                    whole += n.toString();
                    n = 1;
                    whole += molecule[i];
                }
                else{
                    whole += molecule[i];
                }
            }
            return whole;
        }
        function getMoleculeMass(molecule_parts){
            var total_mass = 0;
            for(i=0;i<molecule_parts.length;i++){
                for(j=0;j<elements.length;j++){
                    if(molecule_parts[i] == elements[j].symbol){
                        total_mass += elements[j].atomic_weight;
                    }
                }
            }
            return total_mass;
        }
        function firstMass(firstAtom){
            var total_mass = 0;
            for(j=0;j<elements.length;j++){
                if(firstAtom == elements[j].symbol){
                    total_mass += elements[j].atomic_weight;
                }
            }
            return total_mass;
        }
    </script>
</head>
<body>
    <div class="exercise">
        <div class="vars" >
            <var id="MOLECULE_PARTS">getMolecule()</var>
            <var id="MOLECULE">combineMolecule(MOLECULE_PARTS)</var>
            <var id="TOTAL_MASS">round(100*getMoleculeMass(MOLECULE_PARTS))/100</var>
            <var id="FIRST_MASS"> firstMass(MOLECULE_PARTS[0])</var>
        </div>
        
        <div class="problems">
            <div>
                <div class="question">
                    <p>What is the molar mass of <code><var>MOLECULE</var></code> ?</p>
                    <p>Give your answer correct to two decimal places.</p>
                </div>
                <div class="solution"><var>TOTAL_MASS</var></div>
            </div>
        </div>
        
        <div class="hints">
            <p>To get molar mass, just add up all the atomic masses, found on the periodic table.</p>
            <p>The first molar mass to add is <code><var>MOLECULE_PARTS[0]</var></code>.</p>
            <p>The atom <code><var>MOLECULE_PARTS[0]</var></code> has molar mass <var>FIRST_MASS</var> g/mol.</p>
            <p>The total molar mass is <var>TOTAL_MASS</var> g/mol.</p>
        </div>
    </div>
</body>
</html>
